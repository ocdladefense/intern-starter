<!doctype html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=windows-1252" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
        </script>

        <link rel="stylesheet" href="css/example.css" />
        <link rel="stylesheet" href="node_modules/@ocdladefense/ors/dist/css/loading.css" />
        <link rel="stylesheet" href="node_modules/@ocdladefense/ors/dist/css/modal.css" />
        <link rel="stylesheet" href="node_modules/@ocdladefense/modal-inline/dist/modal.css" />


        <style type="text/css">
            @import "css/form.css";
        </style>
        
    </head>
    <body tab-index="-1">
    
        <form autocomplete="off" tab-index="-1">
            <div class="form-item">
                <label for="q">Search term</label>
                <!-- <input type="text" name="q" id="q" /> -->
                <webc-autocomplete id="query" /> 
            </div>

            <div class="form-item">
                <label>First Name</label>
                <input type="text" placeholder="First Name" />
            </div>

            <div class="form-item">
                <label>Last Name</label>
                <input type="text" placeholder="Last Name" />
            </div>

            <div class="form-item">
                <label>Age</label>
                <input type="text" placeholder="Age" />
            </div>

            <div class="form-item">
                <label>Major</label>
                <input type="text" placeholder="Major" />
            </div>
        </form>



        <script type="module">

            // https://medium.com/streak-developer-blog/the-complexities-of-implementing-inline-autocomplete-for-content-editables-e358c0ed504b
            import ReadingContext from "./node_modules/@ocdladefense/reading-context/reading-context.js";
            import SearchClient from "./node_modules/@ocdladefense/search-client/search-client.js";
            import Autocomplete from "./node_modules/@ocdladefense/webc-autocomplete/autocomplete.js";
            import "./node_modules/@ocdladefense/html/html.js";


              
            // customElements.define("word-count", WordCount, { extends: "p" });
            customElements.define("webc-autocomplete", Autocomplete);




            const terms = ['apple', 'cheese', "cantaloupe", 'apple watch', 'apple macbook', 'apple macbook pro', 'iphone', 'iphone 12'];

            const client = new SearchClient(terms);

            // let searchField = document.createElement("webc-autocomplete");
            // searchField.source(client);
            let autoComplete = document.getElementById("query");
            autoComplete.source(client);
            autoComplete.addEventListener("search",function(e) {
                // Gets the search terms committed as part of the search.
                // e.detail.terms
            });
            autoComplete.addEventListener("beforedisplayresults",function(e) {

            });
            // document.body.append(searchField);
  
            document.body.addEventListener("click",function(e) {
                console.log("Body event listener.");
                autoComplete.hide();
            });

            currentWord(node) {
    
                let reader = ReadingContext.fromNode(node);
                let word = reader.getWordAt(node.selectionStart);
                
                console.log(word);
                
                let suggestions = this.src.suggest(word);
                console.log(suggestions);
            }


                /* 
            const story = "This is a story about a friend named bb baggins.";
            document.body.appendChild(document.createTextNode(story));
            // document.writeln(story);
            const reader = new ReadingContext(story);
            let word = reader.getWordAt(10);
            console.log(word);

            window.reader = reader;

            */

        </script>
    </body>
</html>